---
title: "Mastering SOQL in Salesforce: Best Practices and Advanced Query Techniques"
date: 2025-03-17T04:37:09.101Z
author: Nick Huber
category: Developer
thumbnail: salesforce-jitterbit-integration-blog-img-1080x6282-2-.webp
---


# Mastering SOQL in Salesforce: Best Practices and Advanced Query Techniques

**Salesforce Object Query Language (SOQL)** is an essential tool for developers who work with Salesforce data. Whether you're retrieving records, optimizing queries, or avoiding governor limits, **understanding SOQL best practices** is crucial for **performance and scalability**.

In this guide, we‚Äôll cover **best practices, advanced techniques, and real-world scenarios** to help you write optimized SOQL queries.

---

## üìå What is SOQL?

SOQL (Salesforce Object Query Language) is a query language similar to SQL but tailored for Salesforce. It allows developers to retrieve data from Salesforce objects in an efficient and structured way.

### üîπ Example SOQL Query

```apex
SELECT Id, Name, Industry FROM Account WHERE Industry = 'Technology'
```

---

## üöÄ Best Practices for Writing SOQL Queries

### 1Ô∏è‚É£ Use Selective Filters for Performance

Using indexed fields as filters improves query speed and prevents **Full Table Scans**, which can lead to performance issues.

‚úÖ **Good Example (Using an Indexed Field)**

```apex
SELECT Id, Name FROM Account WHERE CreatedDate = LAST_N_DAYS:30
```

‚ùå **Bad Example (Non-Selective Filter on a Large Object)**

```apex
SELECT Id, Name FROM Account WHERE Name LIKE '%Tech%'
```

**Tip:** Use the [Query Plan Tool](https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/sforce_api_calls_soql_query_plan.htm) in Developer Console to analyze query efficiency.

---

### 2Ô∏è‚É£ Avoid SELECT * (Retrieve Only Required Fields)

Retrieving unnecessary fields **increases data processing time** and can **hit governor limits**.

‚úÖ **Good Example (Fetching Only Required Fields)**

```apex
SELECT Id, Name FROM Contact WHERE AccountId = :someAccountId
```

‚ùå **Bad Example (Fetching Unnecessary Fields)**

```apex
SELECT Id, Name, Phone, Email, MailingAddress, Description FROM Contact WHERE AccountId = :someAccountId
```

---

### 3Ô∏è‚É£ Use Relationships for Efficient Data Retrieval

Instead of making multiple queries, use **relationship queries** to fetch data in a single call.

‚úÖ **Parent-to-Child Query (Subquery Example)**

```apex
SELECT Id, Name, (SELECT Id, LastName FROM Contacts) FROM Account WHERE Industry = 'Technology'
```

‚úÖ **Child-to-Parent Query (Using Relationship Fields)**

```apex
SELECT Id, Name, Account.Name FROM Contact WHERE Email LIKE '%@example.com'
```

---

### 4Ô∏è‚É£ Bulkify Queries to Handle Large Data Volumes

Always use **collections** (lists, sets, and maps) to process bulk records in SOQL queries.

‚úÖ **Good Example (Bulkified Query)**

```apex
Map<Id, Account> accountsMap = new Map<Id, Account>(
    [SELECT Id, Name FROM Account WHERE Id IN :accountIds]
);
```

‚ùå **Bad Example (Query Inside a Loop - Hits Governor Limits)**

```apex
for (Account acc : someAccountList) {
    Account accData = [SELECT Id, Name FROM Account WHERE Id = :acc.Id];
}
```

---

### 5Ô∏è‚É£ Use Aggregate Functions for Reporting

Instead of retrieving all records and processing them in Apex, use **SOQL aggregate functions** for performance optimization.

‚úÖ **Good Example (Using COUNT)**

```apex
SELECT COUNT(Id) FROM Contact WHERE AccountId = :someAccountId
```

‚úÖ **Good Example (Using SUM & GROUP BY)**

```apex
SELECT Industry, COUNT(Id) FROM Account GROUP BY Industry
```

---

## üî• Advanced SOQL Techniques

### 6Ô∏è‚É£ Optimize Queries with LIMIT & ORDER BY

Using `LIMIT` and `ORDER BY` **improves performance** by restricting data retrieval.

```apex
SELECT Id, Name FROM Opportunity ORDER BY CreatedDate DESC LIMIT 10
```

---

### 7Ô∏è‚É£ Use OFFSET for Pagination

When dealing with large datasets, use `OFFSET` to implement **pagination** in SOQL queries.

```apex
SELECT Id, Name FROM Account ORDER BY CreatedDate DESC LIMIT 50 OFFSET 50
```

---

### 8Ô∏è‚É£ Asynchronous SOQL Queries for Large Data Sets

For handling **millions of records**, use **Asynchronous SOQL** via **Batch Apex** or **Big Object Queries**.

```apex
Database.QueryLocator ql = Database.getQueryLocator([SELECT Id, Name FROM BigObject]);
```

---

## üîç Common SOQL Errors & How to Fix Them

üî¥ **"Too many SOQL queries: 101"** ‚Äì This occurs when queries are run inside loops. **Solution:** Bulkify your SOQL queries.

üî¥ **"System.LimitException: Too many query rows: 50001"** ‚Äì This means you have exceeded the **query row limit**. **Solution:** Use **LIMIT**, **Filters**, and **Batch Apex**.

---

## üìå Final Thoughts

Mastering **SOQL best practices** will **boost Salesforce performance** and prevent governor limit issues. Always **optimize your queries** by using selective filters, relationship queries, and bulkifying SOQL calls.

üí° **Want to explore more about SOQL?** Drop a comment below with your questions! üöÄ

